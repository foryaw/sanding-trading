import { ethers, BigNumber } from "ethers";
import { UniswapV2EthPair } from "./UniswapV2EthPair";
import { UNISWAP_FACTORY_ADDRESS } from "./addresses";
import * as dotenv from "dotenv"
import _ from "lodash";
dotenv.config()

const somePairs= [
    '0xB4e16d0168e52d35CaCD2c6185b44281Ec28C9Dc',
    '0x12EDE161c702D1494612d19f05992f43aa6A26FB',
    '0xA478c2975Ab1Ea89e8196811F51A7B7Ade33eB11',
    '0xCe407CD7b95B39d3B4d53065E711e713dd5C5999',
    '0xB6909B960DbbE7392D405429eB2b3649752b4838',
    '0xBb2b8038a1640196FbE3e38816F3e67Cba72D940',
    '0x9896BD979f9DA57857322Cc15e154222C4658a5a',
    '0x598E740cda7C525080d3FCb9Fa7C4E1bd0044B34',
    '0x43AE24960e5534731Fc831386c07755A2dc33D47',
    '0x231F3381D10478BfC2cA552195b9d8B15968B60c',
    '0x3b0F0fe3Be830826D833a67cD1d7C80edF3Fb49b',
    '0x67660E35fee501d0876B9493bb5eC90E10675957',
    '0x260E069deAd76baAC587B5141bB606Ef8b9Bab6c',
    '0x5D27dF1a6E03254E4f1218607D8E073667ffae2F',
    '0xB784CED6994c928170B417BBd052A096c6fB17E2',
    '0xa2107FA5B38d9bbd2C461D6EDf11B11A50F6b974',
    '0x718Dd8B743ea19d71BDb4Cb48BB984b73a65cE06',
    '0x55D5c232D921B9eAA6b37b5845E439aCD04b4DBa',
    '0xa5E79baEe540f000ef6F23D067cd3AC22c7d9Fe6',
    '0xC2aDdA861F89bBB333c90c492cB837741916A225',
    '0x99731C13ef1aaB58e48FA9a96deFEFdf1b8DE164',
    '0xad3B5027d090b7bc120Dc264906ca4642b0fb9F3',
    '0xF49144E61C05120f1b167E4B4F59cf0a5d77903F',
    '0xc5be99A02C6857f9Eac67BbCE58DF5572498F40c',
    '0xC5A788F63e5D9cF2C324621EEd51A98F85AE373b',
    '0x8AeC9fa239417C8Eb778728c175f2B5C36CB1cCf',
    '0x0FFC70bE6e2d841e109653ddb3034961591679d6',
    '0x70EA56e46266f0137BAc6B75710e3546f47C855D',
    '0x596A92F8d8b8906fae8e3Dad346284f354830E1a',
    '0xa32523371390b0Cc4e11F6Bb236ecf4C2cDEA101',
    '0xD6054455Ca2e1AEf02178E0462D9ab953bEA4e23',
    '0x6AeEbC2f5c979FD5C4361C2d288E55Ac6b7e39Bb',
    '0x06d5b7380C65c889abd82D3Df8aC118AF31156a1',
    '0xE0cc5aFc0FF2c76183416Fb8d1a29f6799FB2cdF',
    '0x86DFae20051E175F84D0aD29a6d20e5e07135B92',
    '0xc6F348dd3B91a56D117ec0071C1e9b83C0996De4',
    '0x5B7aD60A92e725597e4A28444d498d1999cF66b6',
    '0x919B599ecB6C9a474a046d1252b2F41f8047dECB',
    '0x2084C8115D97a12114A70A27198C3591B6df7D3E',
    '0xc12c4c3E0008B838F75189BFb39283467cf6e5b3',
    '0xf80758aB42C3B07dA84053Fd88804bCB6BAA4b5c',
    '0x70258Aa9830C2C84d855Df1D61E12C256F6448b4',
    '0x01962144D41415cCA072900Fe87Bbe2992A99F10',
    '0x9B533F1cEaa5ceb7e5b8994ef16499E47A66312D',
    '0xa86B8938ed9017693c5883e1b20741b8f735Bf2b',
    '0x598e7A017dAce2534Bc3F7496124C89425b1E165',
    '0x85000F8C1877b2CD729f65a62A5f66Ab64Dd952e',
    '0x343FD171caf4F0287aE6b87D75A8964Dc44516Ab',
    '0xEb10676a236e97E214787e6A72Af44C93639BA61',
    '0x3203d789bfdB222bfdd629B8de7C5Dc38e8241eC',
    '0xB27dE0bA2abFbFdf15667a939f041b52118aF5Ba',
    '0x11b1f53204d03E5529F09EB3091939e4Fd8c9CF3',
    '0x1c9052e823b5f4611EF7D5fB4153995b040ccbf5',
    '0xf49C43Ae0fAf37217bDcB00DF478cF793eDd6687',
    '0x2b6A25f7C54F43C71C743e627F5663232586C39F',
    '0x302Ac87B1b5ef18485971ED0115a17403Ea30911',
    '0x2bCDC753b4bB03847df75368aE3ef9A14Ee53401',
    '0xec2D2240D02A8cf63C3fA0B7d2C5a3169a319496',
    '0x6d57a53A45343187905aaD6AD8eD532D105697c1',
    '0xfb7A3112c96Bbcfe4bbf3e8627b0dE6f49E5142A',
    '0x3fd4Cf9303c4BC9E13772618828712C8EaC7Dd2F',
    '0xf0936E53D924d7F442A04c038082A46c77ECc8d8',
    '0x8Bd1661Da98EBDd3BD080F0bE4e6d9bE8cE9858c',
    '0xb469FDd40BDdA27d602C65A9ada1DBB438556F4E',
    '0x1FaFf62977DD342ae785831547ae90233b9642De',
    '0x4C95840bB3cE1d717138b3376473f2c021d7BC64',
    '0x17eE04ec364577937855D2e9a7adD8d2a957E4Fa',
    '0xfa19de406e8F5b9100E4dD5CaD8a503a6d686Efe',
    '0xD98D0079B54ca49B6c3717a5078Fb3fb2C412103',
    '0xb4d0d9df2738abE81b87b66c80851292492D1404',
    '0x59E7Bee6374A3f6ecB33180ecE978fd4f2B7Cea2',
    '0xE56c60B5f9f7B5FC70DE0eb79c6EE7d00eFa2625',
    '0x94D24895045190e623997b0e25034C4d0ab32381',
    '0x4a7d4BE868e0b811ea804fAF0D3A325c3A29a9ad',
    '0x27C64bDCA05D79F6Ee32c3e981dC5153d9D794CD',
    '0x819f3450dA6f110BA6Ea52195B3beaFa246062dE',
    '0x2615b89AD032CcDa6D67e1D511F0E4c9e3a5dc13',
    '0x3BcCa6cD264709Ffc7761C9339F2f2605Fd4F24d',
    '0x60eF16af3B1392fB6f98d2d06B5eD958a373DCb5',
    '0xBF452277b8aF4084fB8A0472ec808f2ded51f1C1',
    '0x8dB45142687Bd981e4195b277836E91ca4835054',
    '0x88D97d199b9ED37C29D846d00D443De980832a22',
    '0x121B382b5F003C41fb49E7B88D079c8f513fEaaC',
    '0x8Fb8707ef6b66e999aC09A5f96d6ccCD250bCBAd',
    '0xAEF16913b6C50EBCf627a394921F306985FC8604',
    '0xCAa4C5099432C6A875D93c7d1E738BDe694706e9',
    '0x06009b975bf45c16fEBC4801E08a250Fd942Dc75',
    '0x127ABF0E2f5e54f6f96884386A58a1D582A1B9b9',
    '0x0d4a11d5EEaaC28EC3F61d100daF4d40471f1852',
    '0x058361eFe02F251D09CC5E681A9d1b404f4eca67',
    '0xd1f99e919f782C001A6C47408C8EA20BA5E14D46',
    '0x93Fe923F1663b149FBb930e55dd0a77d38FC5eC3',
    '0x2F2399AfBcF979cA3D92a3158562C9A397b28D06',
    '0xce2Cc0513634CEf3a7C9C257E294EF5E3092f185',
    '0x4CAa3eCC73201edd2a42E4679a27b9D0Cd590Db3',
    '0x755C1a8F71f4210CD7B60b9439451EfCbeBa33D1',
    '0x2DCF69788f60E1C2Fe50c2E795177CC5a07455Ef',
    '0x4130766F0AfB01310BdfC4cdBE923217a23E7e2e',
    '0x50A92b2bb1De408854c8FDe649ad5eA0dFcAd483',
    '0x6fa835713c6daeDfA7A8bD241c8d658f51dF1FE0',
]

const pairs  = [
     {
        _marketAddress: '0xa2107FA5B38d9bbd2C461D6EDf11B11A50F6b974',
        _tokens: [
          '0x514910771AF9Ca656af840dff83E8264EcF986CA',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x514910771AF9Ca656af840dff83E8264EcF986CA': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0x718Dd8B743ea19d71BDb4Cb48BB984b73a65cE06',
        _tokens: [
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
          '0xC0F9bD5Fa5698B6505F643900FFA515Ea5dF54A9'
        ],
        _protocol: '',
        _tokenBalances: {
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber],
          '0xC0F9bD5Fa5698B6505F643900FFA515Ea5dF54A9': [BigNumber]
        }
      },
       {
        _marketAddress: '0x55D5c232D921B9eAA6b37b5845E439aCD04b4DBa',
        _tokens: [
          '0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0xa5E79baEe540f000ef6F23D067cd3AC22c7d9Fe6',
        _tokens: [
          '0xaaAEBE6Fe48E54f431b0C390CfaF0b017d09D42d',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0xaaAEBE6Fe48E54f431b0C390CfaF0b017d09D42d': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0xC2aDdA861F89bBB333c90c492cB837741916A225',
        _tokens: [
          '0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x9f8F72aA9304c8B593d555F12eF6589cC3A579A2': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0x99731C13ef1aaB58e48FA9a96deFEFdf1b8DE164',
        _tokens: [
          '0x054B642117892205A6F5a0b8c29Ffd10a6369d19',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x054B642117892205A6F5a0b8c29Ffd10a6369d19': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0xad3B5027d090b7bc120Dc264906ca4642b0fb9F3',
        _tokens: [
          '0x78a685E0762096ed0F98107212e98F8C35A9D1D8',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x78a685E0762096ed0F98107212e98F8C35A9D1D8': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0xF49144E61C05120f1b167E4B4F59cf0a5d77903F',
        _tokens: [
          '0x07597255910a51509CA469568B048F2597E72504',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x07597255910a51509CA469568B048F2597E72504': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0xc5be99A02C6857f9Eac67BbCE58DF5572498F40c',
        _tokens: [
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
          '0xD46bA6D942050d489DBd938a2C909A5d5039A161'
        ],
        _protocol: '',
        _tokenBalances: {
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber],
          '0xD46bA6D942050d489DBd938a2C909A5d5039A161': [BigNumber]
        }
      },
       {
        _marketAddress: '0xC5A788F63e5D9cF2C324621EEd51A98F85AE373b',
        _tokens: [
          '0x9Cb2f26A23b8d89973F08c957C4d7cdf75CD341c',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x9Cb2f26A23b8d89973F08c957C4d7cdf75CD341c': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
       {
        _marketAddress: '0x8AeC9fa239417C8Eb778728c175f2B5C36CB1cCf',
        _tokens: [
          '0x5A844590c5b8f40ae56190771d06c60b9ab1Da1C',
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
        ],
        _protocol: '',
        _tokenBalances: {
          '0x5A844590c5b8f40ae56190771d06c60b9ab1Da1C': [BigNumber],
          '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2': [BigNumber]
        }
      },
]

async function main() {
    const provider = ethers.getDefaultProvider(process.env.ETHEREUM_RPC_URL)
    const allPairs = await UniswapV2EthPair.getUniswapMarkets(provider, UNISWAP_FACTORY_ADDRESS)
    const marketsByAddress = UniswapV2EthPair.getUniswapMarketByAddress(allPairs)
    console.log(marketsByAddress)
}

main()

